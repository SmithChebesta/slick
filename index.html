<!DOCTYPE html>
<html lang="en">
<head>
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Document</title>
      <link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
      <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"/>

</head>
<body>
      <style>
            * {
                  box-sizing: border-box 
            }
            body{
                  background: #000;
                  font-family: "Roboto";
                  height: 100vh;
                  padding-top: 200px;
            }
            .slider{
                  width: 90%;
                  max-width: 400px;
                  margin: 0 auto;
                  /* transition: all 300ms; */
            }
            .slider::before{
                  position: absolute;
                  left: 0;
                  top: 0;
                  bottom: 0;
                  margin: auto;
                  content: "";
                  background: linear-gradient(90deg, #000000 9.35%, rgba(0, 0, 0, 0) 65.68%, rgba(0, 0, 0, 0) 159.64%);
                  height: 100%;
                  width: 100px;
                  z-index: 1;
                  pointer-events: none;
            }
            .slider::after{
                  position: absolute;
                  right: 0;
                  top: 0;
                  bottom: 0;
                  margin: auto;
                  content: "";
                  background: linear-gradient(-90deg, #000000 9.35%, rgba(0, 0, 0, 0) 65.68%, rgba(0, 0, 0, 0) 159.64%);
                  height: 100%;
                  width: 100px;
                  z-index: 1;
                  pointer-events: none;
            }
            .slider__item{
                  display: flex;
                  justify-content: center;
                  margin: 0px 5px;
                  padding-top: 10px;
                  width: 65px;
                  height: 150px;
                  opacity : .6;
                  position: relative;
                  transition: transform 300ms;
                  transform: translateX(-50%);

            }
        
            .slider.is--active .slider__item{
                  transform: translateX(0%);
            }
            .slider.is--active .slider__item.slick-current{
                  opacity: 1;
            }
            .slider.is--active .slider__item.slick-current img{
                  width: 65px;
                  height: 65px;
                  transform: translateY(-5px);
            }
            .slider.is--active .slider__text-container.is--show{
                  opacity: 1;
            }
            .slider__item img{
                  width: 55px;
                  height: 55px;
                  margin: 0 auto;
                  cursor: pointer;
                  transition: all 100ms;
            }
            
            .slider__text-container{
                  opacity: 0;
                  position: absolute;
                  transform: translateX(-50%);
                  left: 50%;
                  top: 80px;
                  color: white;
                  font-weight: bold;
                  font-size: 14px;
                  line-height: 22px;
                  text-align: center;
                  white-space: nowrap;
                  transition: opacity 550ms;
            }
          
            .slider__text-descr{
                  font-family: Roboto;
                  font-weight: normal;

            }
      </style>
      <div class="slider ">
            <div class="slider__item">
                  <img class="slider__avatar" src="1.png"  srcset="">
                  <div class="slider__text-container">
                        <div>John Smith!</div>
                        <div class="slider__text-descr">Photographer | University Name</div>
                  </div>

            </div>
            <div  class="slider__item" >
                  <img src="2.png"  srcset="">
                  <div class="slider__text-container">
                        <div>Mary Johnson</div>
                        <div class="slider__text-descr">Teacher | University Name</div>
                  </div>
            </div>
            <div  class="slider__item" >
                  <img src="3.png"  srcset="">
                  <div class="slider__text-container">
                        <div>Colten Mertz</div>
                        <div class="slider__text-descr">Photographer | University Name</div>
                  </div>
            </div>
            <div  class="slider__item" >
                  <img src="4.png"  srcset="">
                  <div class="slider__text-container">
                        <div>Addison Ondricka</div>
                        <div class="slider__text-descr">Photographer | University Name</div>
                  </div>
            </div>
            <div class="slider__item">
                  <img class="slider__avatar" src="1.png"  srcset="">
                  <div class="slider__text-container">
                        <div>John Smith!</div>
                        <div class="slider__text-descr">Photographer | University Name</div>
                  </div>

            </div>
            <div  class="slider__item" >
                  <img src="2.png"  srcset="">
                  <div class="slider__text-container">
                        <div>Mary Johnson</div>
                        <div class="slider__text-descr">Teacher | University Name</div>
                  </div>
            </div>
            <div  class="slider__item" >
                  <img src="3.png"  srcset="">
                  <div class="slider__text-container">
                        <div>Colten Mertz</div>
                        <div class="slider__text-descr">Photographer | University Name</div>
                  </div>
            </div>
            <div  class="slider__item" >
                  <img src="4.png"  srcset="">
                  <div class="slider__text-container">
                        <div>Addison Ondricka</div>
                        <div class="slider__text-descr">Photographer | University Name</div>
                  </div>
            </div>
     
           
      </div>
      <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
      <script type="text/javascript" src="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
      <script>
            const slick = $('.slider').slick({
                  variableWidth: true,
                  infinite: false,
                  arrows: false,
                  centerMode: true,
                  swipeToSlide: true,
                  speed : 300,
                  adaptiveHeight: true,
            })
            let middleState = false
            let prevSlide = 0
            let beforeActive = 0
            let isDragging = false
            $('.slider__item img').on('click', (e)=>{
                  if(isDragging) return
                  const target = $(e.target)
                  const slide = $(e.target).parents('.slider__item')
                  let index = slide.data("slick-index")

                  if(target.parents('.slider__item').hasClass("slick-current")){
                        if(slick.hasClass("is--active")){
                              slick.removeClass("is--active")
                              debugger
                              changePage(beforeActive)

                              
                        }else{
                              slick.addClass("is--active")
                              changePage(index) 
                        }
                  }else{
                        slick.addClass("is--active")
                        changePage(index) 
                  }
                
                 

                  function changePage(index) {
                        if (index <= -2) {
                              slick.slick('slickPrev')
                        }
                              slick.slick('slickGoTo',index)
                        }
                
                  
            });
            slick.on("beforeChange" , function(_, _, currentSlide,nextSlide){
                  beforeActive = currentSlide
                  
                  if(nextSlide !== prevSlide){
                        slick.find('.slider__text-container').removeClass("is--show")
                  }else{
                        // console.log('hi');
                        // slick.slick('slickGoTo',currentSlide)
                  }

                  // if ((currentSlide > nextSlide && (nextSlide !== 0 || currentSlide === 1)) || (currentSlide === 0 && nextSlide === slick.slideCount - 1)) {
                  //       console.log('previous');
                  // }
                  // else {
                  //       console.log('next');
                  // }
                                    
            })
            slick.on("afterChange" , function(_, _,currentSlide){
                  if(currentSlide !== prevSlide){
                        slick.find('.slick-current .slider__text-container').addClass("is--show")
                        prevSlide = currentSlide
                  }
                  else{
                        slick.find('.slick-current .slider__text-container').toggleClass("is--show")
                  }
                  
            })
            slick.on('dragstart', function(){
                  isDragging = true
            });
            slick.on('mouseup', function(){
                  setTimeout(() => {
                        isDragging = false
                        // slick.find('.slick-current .slider__text-container').addClass("is--show")
                  }, 1);
            });
      </script>
  <!-- <script>
      let slick = $('.slider').slick({
            variableWidth: true,
            infinite: true,
            arrows: false,
            centerMode: false,
            swipeToSlide: true,
            speed : 300,
            adaptiveHeight: true,
      })
      let middleState = false
      let prevSlide = 0
      let isDragging = false

     
      $('.slider__item').on('click', (e)=>{
            if(isDragging) return
            const target = $(e.target)
            
            if(target.parents('.slider__item').hasClass("slick-current")){
                  console.log('a');
                  // slick.slick('slickSetOption', 'centerMode', true);
                  middleState = !middleState
                  reInitSlick()
                  slick.toggleClass("is--active")

            }else{
                  reInitSlick(true)
                  slick.addClass("is--active")

            }
            const slide = $(e.target).parents('.slider__item')
            let index = slide.data("slick-index")
            if (index <= -2) {
                   slick.slick('slickPrev')
            }
            // slick.addClass("is--active")
            slick.slick('slickGoTo',index)
            
      });
      slick.on("beforeChange" , function(_, _, _,nextSlide){
            if(nextSlide !== prevSlide){
                  slick.find('.slider__text-container').removeClass("is--show")
            }
            
      })
      slick.on("afterChange" , function(_, _,currentSlide){
            if(currentSlide !== prevSlide){
                  slick.find('.slick-current .slider__text-container').addClass("is--show")
                  prevSlide = currentSlide
            }
            else{
                  slick.find('.slick-current .slider__text-container').toggleClass("is--show")
            }
            
      })
      slick.on('dragstart', function(){
            isDragging = true
      });
      slick.on('mouseup', function(){
            setTimeout(() => {
                  console.log('mouseup');
                  isDragging = false
                  // slick.find('.slick-current .slider__text-container').addClass("is--show")
            }, 1);
      });
      function reInitSlick(state) {
            slick = slick.slick('slickSetOption', {
                        variableWidth: true,
                        infinite: true,
                        arrows: false,
                        centerMode: state || middleState,
                        swipeToSlide: true,
                        speed : 300,
                        adaptiveHeight: true,
                  },true);
      }
      
</script> -->
</body>
</html>